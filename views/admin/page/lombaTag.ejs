<section class="section">
  <div class="section-header">
    <div class="row m-0">
      <h1 class="mr-3">Tag Lomba</h1>
      <a class="btn btn-primary text-white" data-toggle="modal" data-target="#tambahLomba"> Tambah Tag</a>
    </div>
  </div>

  <div class="section-body">
    <!-- <h2 class="section-title">This is Example Page</h2>
    <p class="section-lead">This page is just an example for you to create your own page.</p> -->
    <div class="card">
      <div class="card-header">
        <h4>Puspresnas Vokasi UB</h4>
      </div>
      <div class="card-body">
        <table id="myTable" class="table">
          <thead>
            <tr>
              <th width="5%">No.</th>
              <th width="80%">Tag Lomba</th>
              <th width="15%">Action</th>
            </tr>
          </thead>
          <tbody>
            <% var no=1; tag.forEach((data)=> {
              %>
              <tr>
                <td class="text-center">
                  <%= no %>
                </td>

                <td>
                  <%= data.tag %>
                </td>
                <td align="center" style="width: 90px;">
                  <button type="button" class="btn btn-table btn-sm btn-primary" title="Edit" data-toggle="modal"
                    data-target="#editTag" onclick='editBuku("<%= data.id %>")'><i class="fa fa-pen"></i></button>
                  <p id="<%= data.id %>" class="d-none">
                    <%= data.tag %>
                  </p>
                  <button type="button" class="btn btn-table btn-sm btn-danger" title="Hapus" data-toggle="modal"
                    data-target="#hapusTag" onclick='hapusBuku("<%= data.id %>")'><i class="fa fa-times"></i></button>
                </td>
              </tr>
              <% no++; }) %>
          </tbody>
        </table>
      </div>
      <div class="card-footer bg-whitesmoke">
        This is card footer
      </div>
    </div>
  </div>
</section>

<div class="modal fade" id="tambahLomba" tabindex="-1" role="dialog" style="display: none;" aria-modal="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fa fa-pen"></i> Tambah Tag Lomba</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <hr>
      <div class="modal-body">
        <form class="forms-sample" method="post">
          <div class="form-group">
            <p for="buku">Nama Tag</p>
            <input type="text" class="form-control" name="tag" value="" required>
            <div class="section-title mt-0">Kategori Lomba</div>
            <div class="form-group">
              <select class="form-control" name="kategoriLomba" required>
                <option class="eKategori" value="">Pilih Kategori</option>
                <% kategori.forEach((data)=> { %>
                  <option class="eKategori" value="<%= data.id %>" >
                      <%= data.kategori %>
                  </option>
                  <% }) %>
              </select>
            </div>
          </div>
          <hr>
          <div class="modal-footer p-0 pt-3">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary btn-shadow" name="submit" value="tambah"><i
                class="fa fa-check"></i><span> Submit</span></button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="editTag" tabindex="-1" role="dialog" style="display: none;" aria-modal="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fa fa-pen"></i>Edit Kategori Lomba</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <hr>
      <div class="modal-body">
        <form class="forms-sample" method="post">
          <div class="form-group">
            <input type="hidden" class="d-none" id="eIdTag" name="id" required>
            <p for="buku">Nama Tag</p>
            <input type="text" class="form-control" id="eTag" name="lomba" value="" required>
            <div class="section-title mt-0">Kategori Lomba</div>
            <div class="form-group">
              <select class="form-control" name="kategoriLomba">
                <option class="eKategori" value="">Pilih Kategori</option>
                <% kategori.forEach((data)=> { %>
                  <option class="eKategori" value="<%= data.id %>" 
                    <% if(data.id == tag[0].kategori_lomba_id) { %>
                       selected = "selected"
                    <% } %>>
                      <%= data.kategori %>
                  </option>
                  <% }) %>
              </select>
            </div>
          </div>
          <hr>
          <div class="modal-footer p-0 pt-3">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary btn-shadow" name="submit" value="edit"><i
                class="fa fa-check"></i><span> Submit</span></button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="hapusTag" tabindex="-1" role="dialog" style="display: none;" aria-modal="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fa fa-pen"></i>Edit Tag Lomba</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <hr>
      <div class="modal-body">
        <form class="forms-sample" method="post">
          <div class="form-group">
            <input type="hidden" class="d-none" id="dIdTag" name="id" required>
            <p id="dhapus"></p>
          </div>
          <hr>
          <div class="modal-footer p-0 pt-3">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-danger btn-shadow" name="submit" value="hapus"><i
                class="fa fa-check"></i><span>Hapus</span></button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  function editBuku(idedit) {
    var dataTag = (document.getElementById(idedit).textContent).split(",");
    document.getElementById("eIdTag").value = idedit;
    document.getElementById("eTag").value = dataTag[0];
  }
  function hapusBuku(idhapus) {
    var datatag = (document.getElementById(idhapus).textContent).split(",");
    document.getElementById("dIdTag").value = idhapus;
    document.getElementById("dhapus").textContent = 'Apakah anda yakin ingin menghapus "' + datatag[0] + '"?';
  }
</script>