<section class="section">
    <div class="section-header">
        <div class="row m-0">
            <h1 class="mr-3">Daftar Mahasiswa Berprestasi</h1>
            <a href="mahasiswaNew" class="btn btn-primary text-white"> Tambah Mahasiswa Berprestasi</a>
        </div>
    </div>

    <div class="section-body">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-12">
                        <div class="table-responsive">
                            <table id="myTable" class="table">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <th>Nama</th>
                                        <th>Bidang Minat</th>
                                        <th>Nama Lomba</th>
                                        <th>Peringkat</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% 
                              var no = 1;
                              mahasiswa.forEach((data)=> { 
                            %>
                                    <tr>
                                        <td class="text-center"><%= no %></td>
                                        <td><%= data.nama %></td>
                                        <td><%= data.bidang_minat %></td>
                                        <td>
                                            <% jenis_lomba.forEach((datalomba)=> { %>
                                                <% 
                                                    if(data.jenis_lomba_id==datalomba.id) {%>
                                                        <%= datalomba.nama_lomba %>
                                                    <% }
                                                %>
                                            <% }) %>
                                        </td>
                                        <td style="width: 100px;"><%= data.peringkat %></td>
                                        <td align="center" style="width: 90px;">
                                            <a href="mahasiswaEdit/<%= data.id %>"
                                                class="btn btn-table btn-sm btn-primary" title="Edit"><i
                                                    class="fa fa-pen"></i></a>
                                            <p id="<%= data.id %>" class="d-none"><%= data.nama %></p>
                                            <button type="button" class="btn btn-table btn-sm btn-danger" title="Hapus"
                                                data-toggle="modal" data-target="#hapusMahasiswa"
                                                onclick='hapusMahasiswa("<%= data.id %>")'><i
                                                    class="fa fa-times"></i></button>
                                        </td>
                                    </tr>
                                    <% no++; }) %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<div class="modal fade" id="hapusMahasiswa" tabindex="-1" role="dialog" style="display: none;" aria-modal="true">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><i class="fa fa-times"></i> Hapus Mahasiswa</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Ã—</span>
                </button>
            </div>
            <hr>
            <div class="modal-body">
                <form class="forms-sample" method="post">
                    <div class="form-group">
                        <p id="dHapus">Apakah anda yakin ingin menghapus Mahasiswa ini?</p>
                        <input type="hidden" class="d-none" class="form-control" id="dId" name="id_mahasiswa" value=""
                            required>
                    </div>
                    <hr>
                    <div class="modal-footer p-0 pt-3">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-danger btn-shadow" name="submit" value="hapus"><i
                                class="fa fa-times"></i><span> Hapus</span></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function hapusMahasiswa(id_mahasiswa) {
        var dataArtikel = (document.getElementById(id_mahasiswa).textContent).split(",");
        document.getElementById("dId").value = id_mahasiswa;
        document.getElementById("dHapus").textContent = 'Apakah anda yakin ingin menghapus "' + dataArtikel[0] + '"?';
    }
</script>