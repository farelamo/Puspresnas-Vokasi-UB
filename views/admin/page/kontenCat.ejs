<section class="section">
  <div class="section-header">
    <div class="row m-0">
      <h1 class="mr-3">Kategori Konten</h1>
      <a class="btn btn-primary text-white" data-toggle="modal" data-target="#tambahKategori"> Tambah Kategori</a>
    </div>
  </div>

  <div class="section-body">
    <!-- <h2 class="section-title">This is Example Page</h2>
    <p class="section-lead">This page is just an example for you to create your own page.</p> -->
    <div class="card">
      <div class="card-body">
        <table id="myTable" class="table">
          <thead>
            <tr>
              <th width="5%">No.</th>
              <th width="80%">Kategori Lomba</th>
              <th width="15%">Action</th>
            </tr>
          </thead>
          <tbody>
            <% 
              var no = 1;
              isi.forEach((data)=> { 
            %>
              <tr>
                <td class="text-center"><%= no %></td>

                <td><%= data.kategori %></td>
                <td align="center" style="width: 90px;">
                  <button type="button" class="btn btn-table btn-sm btn-primary" title="Edit" data-toggle="modal" data-target="#editKategori" onclick='editKategori("<%= data.id %>")'><i class="fa fa-pen"></i></button>
                  <p id="<%= data.id %>" class="d-none"><%= data.kategori %></p>
                  <button type="button" class="btn btn-table btn-sm btn-danger" title="Hapus" data-toggle="modal" data-target="#hapusKategori" onclick='hapusKategori("<%= data.id %>")'><i class="fa fa-times"></i></button>
              </td>
              </tr>
            <% no++; }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<div class="modal fade" id="tambahKategori" tabindex="-1" role="dialog"  style="display: none;" aria-modal="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fa fa-pen"></i> Tambah Kategori Konten</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div><hr>
      <div class="modal-body">
        <form class="forms-sample" method="post">
          <div class="form-group">
            <p for="buku">Nama Kategori</p>
            <input type="text" class="form-control" name="kategori" value="" required>
          </div><hr>
          <div class="modal-footer p-0 pt-3">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary btn-shadow" name="submit" value="tambah"><i class="fa fa-check"></i><span> Submit</span></button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="editKategori" tabindex="-1" role="dialog"  style="display: none;" aria-modal="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fa fa-pen"></i> Edit Kategori Konten</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div><hr>
      <div class="modal-body">
        <form class="forms-sample" method="post">
          <div class="form-group">
            <input type="hidden" class="d-none" id="eId" name="id" required>
            <p for="buku">Nama Kategori</p>
            <input type="text" class="form-control" id="eKategori" name="kategori" value="" required>
          </div><hr>
          <div class="modal-footer p-0 pt-3">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary btn-shadow" name="submit" value="edit"><i class="fa fa-check"></i><span> Submit</span></button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="hapusKategori" tabindex="-1" role="dialog"  style="display: none;" aria-modal="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fa fa-pen"></i> Edit Kategori Konten</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div><hr>
      <div class="modal-body">
        <form class="forms-sample" method="post">
          <div class="form-group">
            <input type="hidden" class="d-none" id="dId" name="id" required>
            <p id="dhapus"></p>
          </div><hr>
          <div class="modal-footer p-0 pt-3">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-danger btn-shadow" name="submit" value="hapus"><i class="fa fa-check"></i><span>Hapus</span></button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  function editKategori(idkategori){
    var dataKategori = (document.getElementById(idkategori).textContent).split(",");
    document.getElementById("eId").value = idkategori;
    document.getElementById("eKategori").value = dataKategori[0];
  }
  function hapusKategori(idkategori){
    var dataKategori = (document.getElementById(idkategori).textContent).split(",");
    document.getElementById("dId").value = idkategori;
    document.getElementById("dhapus").textContent = 'Apakah anda yakin ingin menghapus "'+dataKategori[0]+'"?';
  }
</script>